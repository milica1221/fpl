# Redis configuration for production deployment
# Memory optimization for 2GB droplet

# Set maximum memory to 512MB
maxmemory 512mb

# When memory limit is reached, remove keys using LRU (Least Recently Used)
maxmemory-policy allkeys-lru

# Enable persistence
save 60 1000
save 300 100
save 900 1

# Append-only file for durability
appendonly yes
appendfsync everysec

# Network optimization
tcp-keepalive 300
timeout 300

# Disable unnecessary features to save memory
set-max-intset-entries 512
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# Logging
loglevel notice
logfile ""

# Performance tuning
hz 10
